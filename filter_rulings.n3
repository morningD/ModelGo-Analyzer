@prefix math: <http://www.w3.org/2000/10/swap/math#> .
@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix string: <http://www.w3.org/2000/10/swap/string#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix mg: <http://www.modelgo.li/rdf/terms#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <http://example.org/ns#>.

{   
    # Ruling target work info (rule to)
    ?outw a mg:Work .
    ?outw mg:workName ?outwn .
    # Ruling info
    ?outw mg:hasRuling ?ru .
    ?ru mg:hasRule ?rule .
    ?ru mg:hasOutputDef ?def .
    ?ru mg:hasLicense ?lic .
    # Ruling target action info
    ?ru mg:targetAction ?act .
    ?act a ?actType .
    ?actType rdfs:subClassOf mg:Action .
    # Ruling source work info (rule from)
    ?ru mg:targetWork ?inw .
    ?inw mg:hasWorkForm ?inwf .
    ?inw mg:workName ?inwn .
} log:query {
    ?outw mg:workName ?outwn .
    # Ruling info
    ?outw mg:hasRuling ?ru .
    ?ru mg:hasRule ?rule .
    ?ru mg:hasOutputDef ?def .
    ?ru mg:hasLicense ?lic .
    # Ruling target action info
    ?ru mg:targetAction ?act .
    ?act a ?actType .
    # Ruling source work info
    ?ru mg:targetWork ?inw .
    ?inw mg:hasWorkForm ?inwf .
    ?inw mg:workName ?inwn .
} .